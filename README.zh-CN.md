# Image Comment - VSCode Extension

ä¸€ä¸ª VSCode æ‰©å±•ï¼Œç”¨äºè‡ªåŠ¨ä¿å­˜ç²˜è´´çš„å›¾ç‰‡å¹¶æ’å…¥æ³¨é‡Šå¼•ç”¨ã€‚

[English](./README.md) | [ç®€ä½“ä¸­æ–‡](./README.zh-CN.md)

[![VS Code Marketplace](https://img.shields.io/visual-studio-marketplace/v/hekaigustav.image-comment?label=VS%20Code%20Marketplace&logo=visual-studio-code)](https://marketplace.visualstudio.com/items?itemName=hekaigustav.image-comment)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ–¼ï¸ **è‡ªåŠ¨æ£€æµ‹å›¾ç‰‡ç²˜è´´**ï¼šè‡ªåŠ¨æ£€æµ‹å‰ªè´´æ¿ä¸­çš„å›¾ç‰‡ï¼ˆæ”¯æŒæˆªå›¾ã€å¤åˆ¶å›¾ç‰‡æ–‡ä»¶ç­‰ï¼‰
- ğŸ’¾ **è‡ªåŠ¨ä¿å­˜å›¾ç‰‡**ï¼šå°†å›¾ç‰‡ä¿å­˜åˆ°é¡¹ç›®ç›®å½•ä¸‹çš„æŒ‡å®šæ–‡ä»¶å¤¹ï¼ˆé»˜è®¤ï¼š`.image-comment`ï¼‰
- ğŸ“ **è‡ªåŠ¨æ’å…¥æ³¨é‡Š**ï¼šåœ¨ç²˜è´´ä½ç½®è‡ªåŠ¨æ’å…¥å›¾ç‰‡å¼•ç”¨æ³¨é‡Š
- ğŸŒ **å¤šå¹³å°æ”¯æŒ**ï¼šæ”¯æŒ macOSã€Windows å’Œ Linux
- ğŸ”§ **æ™ºèƒ½æ³¨é‡Šæ ¼å¼**ï¼šæ ¹æ®æ–‡ä»¶ç±»å‹è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ³¨é‡Šæ ¼å¼
- ğŸŒ **å›½é™…åŒ–æ”¯æŒ**ï¼šæ”¯æŒè‹±æ–‡ã€ç®€ä½“ä¸­æ–‡ã€ç¹ä½“ä¸­æ–‡
- âš™ï¸ **å¯é…ç½®é€‰é¡¹**ï¼šæ”¯æŒè‡ªå®šä¹‰ä¿å­˜ç›®å½•ã€æ³¨é‡Šæ¨¡æ¿ç­‰
- ğŸ“‹ **å³é”®èœå•**ï¼šæä¾›ä¾¿æ·çš„å³é”®èœå•é€‰é¡¹

## ğŸ“¦ å®‰è£…

### ä» VS Code å¸‚åœºå®‰è£…ï¼ˆæ¨èï¼‰

**ç›´æ¥é“¾æ¥**ï¼š[ä»å¸‚åœºå®‰è£…](https://marketplace.visualstudio.com/items?itemName=hekaigustav.image-comment)

æˆ–æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ï¼š

1. æ‰“å¼€ VS Code
2. æŒ‰ `Ctrl+Shift+X`ï¼ˆmacOS: `Cmd+Shift+X`ï¼‰æ‰“å¼€æ‰©å±•é¢æ¿
3. æœç´¢ "Image Comment"
4. ç‚¹å‡»å®‰è£…

### ä»æºç å®‰è£…

1. å…‹éš†æˆ–ä¸‹è½½æ­¤ä»“åº“ï¼š

   ```bash
   git clone https://github.com/HEKEH/vscode-image-comment.git
   cd image-comment
   ```

2. å®‰è£…ä¾èµ–å¹¶ç¼–è¯‘ï¼š

   ```bash
   npm install
   npm run compile
   ```

3. åœ¨ VS Code ä¸­æŒ‰ `F5` æ‰“å¼€æ‰©å±•å¼€å‘çª—å£è¿›è¡Œæµ‹è¯•

4. æˆ–è€…æ‰“åŒ…ä¸º `.vsix` æ–‡ä»¶ï¼š

   ```bash
   npm install -g vsce
   vsce package
   ```

   ç„¶ååœ¨ VS Code ä¸­ä½¿ç”¨ "ä» VSIX å®‰è£…" åŠŸèƒ½å®‰è£…ç”Ÿæˆçš„ `.vsix` æ–‡ä»¶

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•ä¸€ï¼šå³é”®èœå•ï¼ˆæ¨èï¼‰

1. å¤åˆ¶å›¾ç‰‡åˆ°å‰ªè´´æ¿ï¼ˆæ”¯æŒä»¥ä¸‹æ–¹å¼ï¼‰ï¼š
   - æˆªå›¾ï¼ˆmacOS: `Cmd+Shift+4`ï¼ŒWindows: `Win+Shift+S`ï¼ŒLinux: ä½¿ç”¨ç³»ç»Ÿæˆªå›¾å·¥å…·ï¼‰
   - å¤åˆ¶å›¾ç‰‡æ–‡ä»¶ï¼ˆåœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­å¤åˆ¶å›¾ç‰‡æ–‡ä»¶ï¼‰
   - ä»æµè§ˆå™¨æˆ–å…¶ä»–åº”ç”¨å¤åˆ¶å›¾ç‰‡

2. åœ¨ä»£ç ç¼–è¾‘å™¨ä¸­å³é”®ç‚¹å‡»ï¼Œé€‰æ‹© **"ç²˜è´´å›¾ç‰‡ä¸ºæ³¨é‡Š"**ï¼ˆPaste Image as Commentï¼‰

   <img src="./images/context-menu.png" alt="å³é”®èœå•" width="200">

3. æ’ä»¶ä¼šè‡ªåŠ¨ï¼š
   - æ£€æµ‹å‰ªè´´æ¿ä¸­çš„å›¾ç‰‡
   - ä¿å­˜å›¾ç‰‡åˆ° `.image-comment` æ–‡ä»¶å¤¹
   - åœ¨å½“å‰ä½ç½®æ’å…¥æ³¨é‡Š

### æ–¹æ³•äºŒï¼šå‘½ä»¤é¢æ¿

1. å¤åˆ¶å›¾ç‰‡åˆ°å‰ªè´´æ¿
2. æŒ‰ `Ctrl+Shift+P`ï¼ˆmacOS: `Cmd+Shift+P`ï¼‰æ‰“å¼€å‘½ä»¤é¢æ¿
3. è¾“å…¥ "Paste Image as Comment" å¹¶é€‰æ‹©

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šJavaScript/TypeScript

```javascript
// ![image](.image-comment/image-20241225-120000-abc123.png)
```

### ç¤ºä¾‹ 2ï¼šPython

```python
# ![image](.image-comment/image-20241225-120000-abc123.png)
```

### ç¤ºä¾‹ 3ï¼šHTML

```html
<!-- ![image](.image-comment/image-20241225-120000-abc123.png) -->
```

### ç¤ºä¾‹ 4ï¼šMarkdown

```markdown
![image](.image-comment/image-20241225-120000-abc123.png)
```

## âš™ï¸ é…ç½®é€‰é¡¹

åœ¨ VS Code è®¾ç½®ä¸­å¯ä»¥é…ç½®ä»¥ä¸‹é€‰é¡¹ï¼š

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
| :--- | :--- | :--- | :--- |
| `imageComment.saveDirectory` | string | `.image-comment` | å›¾ç‰‡ä¿å­˜ç›®å½•åç§°ï¼ˆç›¸å¯¹äºå·¥ä½œåŒºæ ¹ç›®å½•ï¼‰ |
| `imageComment.commentTemplate` | string | `![image]({path})` | æ³¨é‡Šæ¨¡æ¿ï¼Œä½¿ç”¨ `{path}` ä½œä¸ºå›¾ç‰‡è·¯å¾„çš„å ä½ç¬¦ |
| `imageComment.useRelativePath` | boolean | `true` | æ˜¯å¦åœ¨æ³¨é‡Šä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„ |

### é…ç½®ç¤ºä¾‹

åœ¨ VS Code è®¾ç½®ï¼ˆ`settings.json`ï¼‰ä¸­æ·»åŠ ï¼š

```json
{
  "imageComment.saveDirectory": ".images",
  "imageComment.commentTemplate": "<!-- Image: {path} -->",
  "imageComment.useRelativePath": true
}
```

## ğŸ¨ æ”¯æŒçš„æ³¨é‡Šæ ¼å¼

æ’ä»¶ä¼šæ ¹æ®æ–‡ä»¶ç±»å‹è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ³¨é‡Šæ ¼å¼ï¼š

| è¯­è¨€ | å•è¡Œæ³¨é‡Š | å¤šè¡Œæ³¨é‡Š |
| :--- | :--- | :--- |
| JavaScript/TypeScript | `//` | `/* */` |
| Python | `#` | `""" """` |
| Java/C/C++/C#/Go/Rust | `//` | `/* */` |
| HTML | - | `<!-- -->` |
| CSS/SCSS/Less | `//` | `/* */` |
| SQL | `--` | `/* */` |
| Shell/Bash | `#` | `: <<'EOF' ... EOF` |
| Ruby | `#` | `=begin =end` |
| PHP | `//` | `/* */` |
| Swift/Kotlin/Scala | `//` | `/* */` |
| YAML | `#` | - |
| JSON | - | `/* */` |

## ğŸ–¼ï¸ æ”¯æŒçš„å›¾ç‰‡æ ¼å¼

- PNG
- JPEG/JPG
- GIF
- WebP
- BMP
- SVG

**æ³¨æ„**ï¼šå›¾ç‰‡å¤§å°é™åˆ¶ä¸º 50MBã€‚

## ğŸŒ å›½é™…åŒ–æ”¯æŒ

æ’ä»¶æ”¯æŒä»¥ä¸‹è¯­è¨€ï¼š

- Englishï¼ˆè‹±æ–‡ï¼‰
- ç®€ä½“ä¸­æ–‡ï¼ˆzh-CNï¼‰
- ç¹ä½“ä¸­æ–‡ï¼ˆzh-TWï¼‰

è¯­è¨€ä¼šæ ¹æ® VS Code çš„è¯­è¨€è®¾ç½®è‡ªåŠ¨åˆ‡æ¢ã€‚

## ğŸ’» ç³»ç»Ÿè¦æ±‚

### macOS

- æ— éœ€é¢å¤–å·¥å…·ï¼Œä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„å‰ªè´´æ¿ API

### Windows

- éœ€è¦ PowerShellï¼ˆç³»ç»Ÿè‡ªå¸¦ï¼ŒWindows 10+ é»˜è®¤å·²å®‰è£…ï¼‰

### Linux

- éœ€è¦å®‰è£… `xclip`ï¼š

  ```bash
  # Ubuntu/Debian
  sudo apt-get install xclip

  # Fedora/CentOS
  sudo dnf install xclip
  # æˆ–
  sudo yum install xclip

  # Arch Linux
  sudo pacman -S xclip

  # openSUSE
  sudo zypper install xclip
  ```

## ğŸ”§ å¼€å‘

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16
- npm >= 8
- VS Code >= 1.74.0

### å¼€å‘å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
npm install

# ç¼–è¯‘ TypeScript
npm run compile

# ç›‘å¬æ¨¡å¼ç¼–è¯‘ï¼ˆå¼€å‘æ—¶ä½¿ç”¨ï¼‰
npm run watch

# æ‰“åŒ…æ‰©å±•
npm install -g vsce
vsce package
```

### é¡¹ç›®ç»“æ„

```text
image-comment/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ extension.ts      # ä¸»æ‰©å±•æ–‡ä»¶
â”‚   â”œâ”€â”€ nls.ts           # å›½é™…åŒ–æ”¯æŒ
â”‚   â””â”€â”€ nls.*.json       # è¯­è¨€æ–‡ä»¶
â”œâ”€â”€ out/                 # ç¼–è¯‘è¾“å‡ºç›®å½•
â”œâ”€â”€ package.json         # æ‰©å±•é…ç½®
â””â”€â”€ tsconfig.json       # TypeScript é…ç½®
```

## â“ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆå³é”®èœå•ä¸­æ²¡æœ‰ "ç²˜è´´å›¾ç‰‡ä¸ºæ³¨é‡Š" é€‰é¡¹ï¼Ÿ

A: è¯·ç¡®ä¿ï¼š

1. ç¼–è¾‘å™¨å¤„äºç„¦ç‚¹çŠ¶æ€
2. ç¼–è¾‘å™¨ä¸æ˜¯åªè¯»æ¨¡å¼
3. æ²¡æœ‰é€‰ä¸­ä»»ä½•æ–‡æœ¬

### Q: å›¾ç‰‡ä¿å­˜åœ¨å“ªé‡Œï¼Ÿ

A: é»˜è®¤ä¿å­˜åœ¨å·¥ä½œåŒºæ ¹ç›®å½•ä¸‹çš„ `.image-comment` æ–‡ä»¶å¤¹ä¸­ã€‚å¯ä»¥åœ¨è®¾ç½®ä¸­ä¿®æ”¹ `imageComment.saveDirectory` æ¥æ›´æ”¹ä¿å­˜ä½ç½®ã€‚

### Q: å¦‚ä½•ä¿®æ”¹æ³¨é‡Šæ ¼å¼ï¼Ÿ

A: åœ¨ VS Code è®¾ç½®ä¸­ä¿®æ”¹ `imageComment.commentTemplate`ï¼Œä½¿ç”¨ `{path}` ä½œä¸ºå›¾ç‰‡è·¯å¾„çš„å ä½ç¬¦ã€‚

### Q: æ”¯æŒå“ªäº›å›¾ç‰‡æ ¼å¼ï¼Ÿ

A: æ”¯æŒ PNGã€JPEGã€GIFã€WebPã€BMPã€SVG ç­‰å¸¸è§å›¾ç‰‡æ ¼å¼ã€‚

### Q: å›¾ç‰‡å¤§å°æœ‰é™åˆ¶å—ï¼Ÿ

A: æ˜¯çš„ï¼Œæœ€å¤§æ”¯æŒ 50MB çš„å›¾ç‰‡æ–‡ä»¶ã€‚

## ğŸ“„ è®¸å¯è¯

MIT License

---

å¦‚æœè¿™ä¸ªæ‰©å±•å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç»™ä¸ª â­ Starï¼
